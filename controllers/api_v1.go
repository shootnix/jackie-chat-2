package controllers

import (
	jwt "github.com/dgrijalva/jwt-go"
	"github.com/gin-gonic/gin"
	"github.com/shootnix/jackie-chat-2/config"
	"github.com/shootnix/jackie-chat-2/entity"
	"github.com/shootnix/jackie-chat-2/logger"
	"net/http"
	"strconv"
	"time"
)

type Credentials struct {
	Password string `json:"password"`
	Username string `json:"username"`
}

type Claims struct {
	Username string `json:"username"`
	jwt.StandardClaims
}

type SendMessageReq struct {
	ChatID    int64  `json:"chat_id"`
	Text      string `json:"text"`
	ParseMode string `json:"parse_mode,omitempty"`
}

func Index(c *gin.Context) {
	c.JSON(http.StatusOK, gin.H{
		"message": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAsICAgICAsICAsQCwkLEBMOCwsOExYSEhMSEhYVERMSEhMRFRUZGhsaGRUhISQkISEwLy8vMDY2NjY2NjY2Njb/2wBDAQwLCwwNDA8NDQ8TDg4OExQODw8OFBoSEhQSEhoiGBUVFRUYIh4gGxsbIB4lJSIiJSUvLywvLzY2NjY2NjY2Njb/wAARCAGpAakDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD1yiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKCQOtQSXUcfegCemPKidTWNe67BADlxxXL6n4ySPcEYZoA7S41OGIcsBWFfeKbeHID15xqPiyeYkK1YFxqdxMSWY80rjseg33jbGQj1gXfi+4kyFY4rlDI74ySSaGXHXg+/+NA7GpPr13Ln5zVJ765kPLGqpdEGCeKb5x25UfLQDLHmyMfmY+1KsrbgC5XPUnt9ap75GywP6UeZIDwce2cmmBph5AB5Vwrk5+X5lIx7sAv5GlTU7uEj5jWWS7Z6k98cU5ZGHBI2+/P5UCOnsfFNzCRuc4rr9J8ZK+1ZG/OvKw6ldwXI9Rn+VTQvMoMkRPy8kdCB60CPoCw1qC4A2uOe1a8cqSDg14JpXiSe2cBmOK9F0PxRHcKqs3NAHc0VWtrtJlByOas0AFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFIzBRk1RutSihBJYCgC8zqvU1Vnv4ohksBXK6n4sggDBWyR71xmp+MZJCQjfrQOx6BqHiW3gB+cE/WuO1TxmTlY3/KuJu9XuLgkljg1nvIzcsSc0rjsbV74hubgn5zj61kyXEkjfO3J96iCsRuYYB6UEhe4X+dACsVzgnH160Akk+nqf85phcr9wYJ79/zqJmIPPX/P+elAiclcD5txHoMj8MU1iTjJ+btu54+lRlznAGQPf/P8qRXG7kAn6/8A1jRYdx4AyQwyT05CimqrHkgAfSmMzZI2k56dhTge+3GOT/k0CHHBOS24dSAc4pQ+VAXhPx4pMtjpkDuOPzzRzg8tg0wAl2OFc5PTggf0pGaUcyPkr0z/AI0gjByW5H5UHAHyqR6g4IoDUUOR8xH4jNKJyDgBjkd81GWHJAK/TpTS6/3SSaBFgS7iAeH6GtK0v7iwkXJwDypByCPYislZVU52j/PvTzd/u9hG5Aevp9DTEep+HvFgbakj/rXfWOqRToCGBzXzpb3UsJWRCQO1dTpPiya3wrMeKBnuSyo3Q0/IPevN7PxtGwG5q2IPFts+MsPzpAdhRWLa63BNja4rViuFkHBoAlooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiigkDk0AFRSzpEOTzVe71COBSScYriNe8VxwhlRufWgDc1fxBFbI3zjIrzvWvFskrMqNWBqmuzXbthjg1kEuTubnuc9KRSRauNRnuWPzEk9qr5ycFst3x0/OopJVOFPGOAB3pgkdvljwmP4h/jSB2La7FB3/L7HqfoOTURmHQcHoKjAYcjI9XJ5Pqcen1pDsQYiGWPWRu3sKYrjyx6t6c57/SkLMTlOB6n/AOvTWGDkc+55pSu1QxycjOT/AEoC40I2TyS3Q9v/AK9KqFc4OB6D+ppwZSMEngYwP6k01twOVIIHJHAH86YhQqg8gk/jSnywM4CH26/pTGbeeTtHoBTF46cj0zz+QBoHcmymQFk4PrSMQQOcg8cMPzIxmoyS2MgKPoKNp7vjPYH+gxQK5KQSQNvHbLAf4fzpPLc5CqQO/wA38qrsoH8Q+nP9aVY9w5yQKBkhjcE/eA9//rU3aw4POO/I/nRubs24Z6HI/mKUCV/ucADO0nqKBEZCj/8AWaCT0XOO+KXEm7aMjPOKdu5wVKsfTp+PegCMKTjIPPTPAqb92nysck9FGab5Tf3s01gxIweh9KYiaJwCqkbgvGD/APWNTjyx3Kn86qbieOmemew9ac5KKAPvdjQBcjlk/wCWbf0q5FcXicgk8Z4Pb1rKjYYDHqO3ept4f5Xyw6Kc+nakykdFZa/dWrqJGI78+leg+H/Ei3AVXbmvG+V5U5GePUfWtPS9Tks5lOSBmkM+h7a4WVAc1PXD+GtfS5jVS3NdpDKsqgimSSUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUU2SQRqSaAB3VBkmsbU9ZitkYlgMVR1zXo7WNstj0ryvXvE0tzIyo5xQM2/EPi4tujiauFur+a7cszEiqks0kpLMc+uaYXIHHAPp/SkMlzt56n3qPeWPJ+gppAA5IGegHNKM4Axgfwj+poC49VUZ4GD1Jo3KOBwgPAA6mmN1w3JPTH9KXfgE5C9t3GR7CmJoVg7Z/hX36/lSqY1GFPzdcnnmmcycAkAdSOp+tBAztVfxNAhS7EfKAfXIximZU8sxLZ5xSlU9c4654zQSpOc9OMnj8BQMXcDwW5/u9/wATikznuNvYd/8ACgBfcA+nU0oaBSflz6MTzn3AyaAGrjPytj1B5/pS4J+4M44z3/TAp2UIGWCg9uB+NIzgDGMnscUCEBl7Lk+/9KcS/eMBh1z/AIGo93HGD6g8H880oZTnK8Drz/SgB4fcOI1ZvUE5/IGjJ/gG3PTqf1JpRIp5UhR9Mce1LuYHcjgsRxg84984oGJtkHLYz9QaZuIGCo/DvSszKB8pYc5JH8iuM/jTfMQ/K2Qe+Dn9DQIN5XIYYI6f5zTRN260EI33HP6j9BSH3bOe/egBd49x9KN5GeaZyGwozjqetBDHJAx+P9KAJBN7Zx7UFy2GkPHoKiAKnAOfVun4U9AXOATntTAf52AAo4HOKejAgkdyMfWoD97C8+9SDCt6jtQBZYhsE8HHXtSgkAE5JHfrUIJ3D0bqPSnhwvB6DgilYpM3tD1iSzmUFuM1674f1pbqJDuycc14IHKtkDHpXWeGdde2mRGYgUCPd0cOuRTqxdH1JLmJSD1raByM0CCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooACcDNYeuakttC5JxgVq3UwijJNeW+NNc2h4lagDmPEuuyXMzIrcc1ypLSHPr3p0sjzSFjz6kmo2mwNi4A7tjk0hilR/Ect+g+tMMmDgfmaj3FjzxTo03nPQetMQ9cklhyT+lDEhtpOWoYkfKOPU01eBub/8AXQMf3wOAeGP+J7U0kbvk+fb0z0H0FNYluB8qilUbwFUbVHU+tADwDt3MeCccdT9P/r0g+ZjlsL/ngetO3nGB0H3f/rUu0YAHB96AEyAdqjj16k/4Uq7Rkkc9snp7+9DALtC5z2Pf8qGIB+YA/Xp+XFIBNifebLe2MfhnmlCRE5B4/ugdPbPJppfPHJ9h/wDWo4BGQcdwO/1xQAYjzkAA/wAvqaCR16nuf8OP601nBztTj16fypCzn1PFMQu6PIO3p2J6/lil3xtjZGFI9yabv28MfqfSn74wNyE+4/8A1UAgwzDIGMfX/wCvTCWWlEgJ3Fjn0zigOufuk++T/OgBu5x0OPWjLN94Zz/EKDIOmMHvTM5zxn8aAHYIPU/lik56jGe4HNJ06/lSgEnjvQAoOcADB6nHSnHBU88U0E9SafgFMj24oAaMkjBGR1B6U/PzbuF/zyOKbjDbsYz1/wAmlwcHnK0AOPGSCAM9PWlIZsFV+Xuabnsf0oVmOVJOO4pgS/KOXbA74/pQzbucc+n8qiLEKOwpWY5oYEwIK5PIPX2qWGRoXV16djVdSQD9c1KpGMDp2FIo9M8Ha3nbG59K9QtJhLGK+etCvWtrpRnAyK9s8PXvn26HOeOaBM6GiiigQUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAc14m1JbWJxnGM14dr2otd3T855Nd54/wBWKTzwg9GI/I15VLIXck9+TSGDNgY/PFRglue3vTgABhupowTjA6f5zQIAFxnOR6etOdiMdj6d6QOR9wfN3c9vpTche+WPf1pgO9M8k9Of50MSTgHOOppFznn8aeAM88np7CgYKir945HoP608lfX8PT6YphO44XhfU08RAY6gd8d/pSEC4H3f9Z6/1pfujAPTp60m7IwnbvngfU0jMpIJzt7k9/oKLDEL4ztzz1//AF0m4g/dyf8APNCtkk4wD3xRkctnB7mgQvzYBBJPr2FJgE/OdxP8Pb8SaaHPQL179/wpwxgjHzfypgK8ik4xyep/pk/4U35m6HHoKCBnpz/WnFWXoMMfTt+PrQAzy+m44xRhF4Qn8Ofx7UojY/M38s07aBkg4x+dACgKBiRcjswODTSMj5WwPQ5pPk6ZJpSARkgk+tADNufvHNGAAMfr/hTtn4+tBCg/NnPYCgBuM5J596DxgY+ppwO4hVHJ6YoC8/P1BoAAo/AdalX5unbrTAN3GMKOg9adGNxI/XtSZSWobeoNN8v3/wDrVIeCe4ppBY4H1ouDRGR0HQevalyOTjH9fpSlTkZ7dRSEEgZ7fdFO4rCZ7U8DOM9+abhcZY8+gp4YEbh26UxCkgcH15P9Kd3H8/amj5/lPU5waASFGe3/AOqkMtQSGOVW6V614K1DfEqZrx8HPI6DvXceC78xyopPegR7ZG25AadVWwl8yIVaoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAPnjx3emXXb2PPCTOv5Ma5Tp7k8n8K1vFkpbxJqntcyj/x41kcnn8qQw3MxwB9adjjg8H7x9cf0ph+UYzyetLyRgcCgBMknAOB6U4ALySKTacZIzT14OWxmmCHDfxt69v8TSfj9TQSBwDhfXv+VIzf3efVqQEgAA4+pJ7VHuJ6E4/LihmLALyqrzjufrTGJOcnApgSNxgHgAcAU3JY5fn+7mm8Dp9T70oUkZPQd6BEjYxznngY/pTRs7cY6Drz9aCGY5Y/QD/GjbwNv4en50CHmV2TyxgD6/4U3BC57fz/AApp+Q7ep6n/AApcEDcx5PRfSgY5WCDOTn27fnSK2TkgY7k9zTQgJyeB60/arYGeR0XoPxNABlc5Bz6ADj8Mmkb5T1PPQUYAzkYPpzQCBksSR0HPX+dAC+Ye/boM8Um8jouM+vp+NKMZ5JwfUU9doODk+nfFIZHliM5yD6cf4UbsqN30wABTzt6jkD2xSLjOcZoAQE8beBSgYPTJPenJljj9KdIuJNuMHpntmgdho2g8nn0FLkE7u386bjuOPb/69ShQqMD7Y+vWkCEJJ4PUcg0eWxJOMn/GnQJ5swVzweuanAUPuH8II2nnoKTdikr6kDgeWCQc461WPPB/OtCSOVlA27UI4z16VUaIjB9etEWhyjYh4BwKdg5x1xQRxxz60mRjd3qzMkx1P5U44IHb1qNcYyx4FODbyQaBMkj5JT1HH1rY8P3Rgulycc1iL94gj5h19CO1WbSTyplIPQ0DPoTw/dCa3Q57Vu1wXgy/8yBVJ6YrvEO5QaBC0UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAfLvic/8VLquf+fqb/0M1mg8Zx+FaPif/kZNV/6+pv8A0M1m5yQBSGKuM5PWpWwFzjjpUWCTjHPrS52j68YpgGcDjk+lLyPbNJ5hAwBg+tIMnt+NAIDj15oBA/xpDgUnX/CgQ4vwOeKQtnpwPak+nTvQAM80AKfU04ZY5J4pmOfU0o547DvQA9eeTwB2/wDr08EngY+p/wAajOG5HQU7bxluB2HqfpQIewVSHAx2I9/XntTVA5LHGeg7mngqW+f5ievsPbFG5Q3yD5O2Rz/OgYhYZ4HHYmkwpzk4Xuf/AKwp7oVQEjaD0Hc/Wm4Ppg9cHpQA0MB93OO3qalErdDg46AqD+eajBGflOD0JpQSvGaAHlg38IXHAI44+maNy4+UHmk5XpnnB5pQV9DnsKRVhSO45/X/AOtQFO3LGnRxbsd81JNjcoxhB0/+uaQ0upGvyk7cemaR1O4FvXvT1IJz0HWnMAZACPlx+PTNIdtBgUNk988n2/8Ar09E3/KBnfzz7dakEOW+Y4U849fQVNFGu8yD5UThcjkkD09zSuUokFuMSZOclcA+4/8ArVfS22rGw5RiBn1PVv0qqsZMZmz/ABEgZ5GK14DGbYvcZQL8sQHIHqTjkEmpmzSmv8yGdS4Q9AFwPrjFZl1HtRSoxng+taiuJNztlsAAY746/SqEykq0jdNxC+nPalB2Y5q6M5x8p2jt0qMcDDdulTSjkgfnUOAO+e1bJnM9GG7DZPTpilwAQRwx5yKbzuIHBPSnAnCnuOh9O9MklXBPzcHGQR1pwIDD1pqglMHgjnP9acMuuQPnzjjuOtAHoXgi/wBsioTXrlnJviBrwDwzeeTdKM8Zr3DRLkTQIc9QKANeiiigAooooAKKKKACiiigAooooAKKKKACiiigD5d8Tf8AIyar/wBfc3/oZrLXqa1PE4/4qTVf+vub/wBDNZp49+aBi545OaTPPXI9KMKOT1pmTjPvQIcWBGcDPrzSfepKdgYAxQAnHSjPOM9KTHNHTigBf8igDPbNHIHWjce1ACjg55+lKXQnlRj0HH+NNzgUmB2oAfvA5C/nSli3zE00AuQB17YpQTnrx0JoAeDjPv1p65Ugg49CP8abtYAEjr0//VS7SV7An+I/40hkrSAdefccn9c1Fu3Z6gen+JpcKmCvPqPegOR0we/QHn0piFAZgcYA6dsD29aRUXdzjI6elOLOTzwB2/yacUAHHygdz1/CkNIQ4A5pyrjk/wAQ6d//AK1ICN2V+73J6mpVLBuBhj684FJlEiq6pvY7VxhR6+tQM5kPTgdAam8tyu85IXAC0qBS2zG0E7S57Y60imthY40XGefXHr6VIsLyOfcZJ9AT3qf7PlYxH8qnhnPoPT2qaCN9piQZaTJL4xwPQVLkWoEaxxNKAM/KMyEf3R6UjgfLFGcFzkgdueAfc1ZKlN1paHNxMQr7em0cnJA9asraLbRLHEC05zukxxkgjiobSNFG/wCpDb2MSxFnILFmA54UYOTU6ljHFEhB3Da2eOVOOpqaJdkACngOxEhPXAIGBUMQZ5yPl2Bi+7rjdhSO+emeKhu5oopW8weINHvcBSSQMA5x26dfyqlcwlQFJzyCBjpjuR2rbERUPgHJOd7nnB7AduazbxHLiEHluT3xzShLUJR0MeSLfkkY3VRkHOOhHSty4jKlc5+Xj296x7hcEkfpXRB3OWpGxX7Z9BwacceXnv8A5xSclQT0BOacmShB7fyrQxFRyjEjtz+FPZvl81O3Jx/Ool4IB+6ev407lE29SDg+4HcfhQBd06Yx3CNnvXtnhC8822TJrwe3bay47HmvXfAtzuiVc+lAHpo5FFNjOUBp1ABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAHzB4mAHiXVs9rqY/8Aj5rL/hz37CtbxSNvibVT63Mv/oRrI42g5oBDecGgYxSnrikALHAoATPpS8k4pAOcUo7AUAA6+1H3qO/FOJAGAMmgaExjrRx2/WkpeO9ACcUY4pf85pdp7n3pBYb0pwOOe/6UgJ/z0pRz17/pQFhd5J5+99acPvZ5buR0oBjUFerUoYKM5+Y9MUASYXqRz/Cvp70YOBgfXHP4nFIgDKQTyO/Wp44g4wgJXpk+vrii4JO5FkKBxknv6ewFPMUqJvmXGfug9SPYVYWCKMCXO4/woB6d6sQxzGUSld0p/wBX3CZ/iOePzpNmiiRw6c/liZyu8kbI+/ryKsfYTbBZJypY9sgCplJWQLOC7JksB0B7AE9s9xUvkRMXmuplzyTGfvAf3RuyfbipbL5fIz5ZmuGXCkooCqqcDPbJFOtkhUmSVS6LwgGSufT1p0squRDZIxbnPfr6dhgVo2ulzvs+0qAmMKpOBgep6/l1qW7DUW3oU0R7qTbCjHB4Y9MZzjB4qz5V0zvBAwDOMsSecdCSQAABitJ4HRBDaqFbGNx+bAPcgjA9s1LZ6YqYBO52JaRmxyB2J9KhyNVEbp9otqrNAAzMNpuDyxx94gd80jJLsMi5SPjhu+SBk9TWs4XySyg/KOijk57ZHQVWmjK23QL2x3JJ/pWTd3c0SsjKtoWAJfDY3MBk4yScAdcZqW0jMTGTAO44f0yO1JYu6xM4GS5Plk+mcCrDHy5Ap6DBI9wDk/rQ3q0NLYkbexyRjcp3N7g84rOkwrSTbc/wLn0H+Jq+zPKvyHKAkh+xHQmqky7Xx1C8OfT/AOtSTHYzroHyuvQ459z2FZl5GFwMduD/AI1sSxtMTL/yzHI9/f8AwqlfhWHzdwChHT3rem9kc9VXTMM4DYP40se4cDvwR7GklBXg84pyMuATyeD/AJ/CuhHG9wOMHb0I5FIG+VSDkr8p9vQ5pJDtyV+7nikYgfMB8jDB+tADlOGBxg9/rXpngOf7ozXmO/JC+mOa73wLNiVRmgD223OYhUlV7Nt0Kn2qxQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB8yeLhjxLqn/XzL/6Eaxs5AHTB5NbfjAf8VLqf/XxJ/wChGsEntQA7nBpo5H49aXORnvQBzigAHHHrS469gKUe3Wk7Hnpx9aAAAnmlVe5oUccdakEbZANS2VFDCM9uB1oALnIHHrVp4GVRuUhm4Vf8akWDYoULukIzgdKXMXyMqbAq8/gaQjIz0XsT/ICrSW0krlcZ9QP5Cn/ZpHJCcEfkPalzIfI2UfLYnA5pWRlOG6j+Ec/nWjFpU7HHPT5jyOPxqeLSZDjtnvS9ou41SfYxxG54C4qRLeZiMDrxXRx6PHEoGGlkPRRkKCf51ox6W8SqCNm4c45Y+w7D8ql1V0LVDucslnKCME4A4JH8hmrCwyRN5ag/N1OM5/A4/WujOnMuFgUhmOAQSScdzz29qnt9MiiQlCsjsfm38NnoSSTn8Kl1S/YpGDbWE8+0sMIOST0/IDNaphEFuVhjRs9XG5sk9MDCrn65rRliRBmZxnHCjAB9sbv51VWCe5IkULsX7icnP+0QvH0pKbZXIkVIrOSJA7KplkJOGO5s/ToAPeqpi8+UxxxLNKDgzN9zd3C5yWPpWr9iknc72LIONq/KpPoAmM/ia1rXT4oY8kDcBgLwNo+gp84uXuZdhpP2KMh1XzThpJMkn6BQBn86ti3LSnerE4yQAFH+6FzkfiTVwRrDynGMk55ye3BzRFEFkY7i8xH3SenXrjpUtlJFYws5+zxLgHqD29Sf5VdjgLdMf3ATz9eBj6U8RrCjAcyNwCPX0zViKIlAB1xjnjPqfxqQKs0SpGSnbt6/SsnVJsQLGjbTK23f6epx7VtSwsSPrgj1FZcwN08h2DyY8Ju9edz/AJ8Cl1KK9vFtjSXZgAfL7L0H6U1ngkmQfeOSTzxj3FazwJ8oQcMMEdMVTaKOObKqMAEDPXAxgfjU3KTRAzxJJsAHPp2B9MVQZWlZ4jkBc/VgMcmr8sLCTzchd3DYH5VCkYMpbpwfrn60XHbQryIPKGByetZl/GyKHbBznC9ua18Axbf7zYb6elUtQQugAXIJx/8AqqoOzRnUjeLOXn6nPCk9KhBIynYdPwq1dIA5Q9u3f2zVBjyfau2Lujz5KzZIWz7iowzDgHIPagNg+x60cBs9u9MQ/IODjBxXaeCZMXCj3ric84PJznNdh4LOLlfqKBnvOnHMC/SrdUtM/wCPdfpV2gQUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB8z+MxjxJqX/XxJ/6EawgCfxrf8aD/AIqTUf8ArvJ/6Ea59Sd3FIAI6j3pemKTnGfU07kHA9M0wEyfxzigenejp+PrVi2tjJkkdKTdkNK70EgjORgfWtC2tAct+X1osoMyfN9K0IEwpHTnisZyOmnT6kBg8zAbBfPzGmLExSQR5yTtL99o64rQMOTg8ZqIRny9q8DJBI6/rWakbOJHHAq4RTtj9f8AE1fgitU5Ujn3H6VVVoIv9ZubseAR+tRGeNXHkr1Jxx0H5U7NkuVjoMRKnyDcWHXsPcmpbeCNU3P8zHnHqfQCsWK8ZV2sd2eMnpj6CrI1aFSCWG7GFGRn3J4qXB9Bqa6m/HCD8z8k/wA//rVZEQwABh27+gFYMWtQgCNQ2fXt+daEN7u/1v3T0AJGR3NLlaHzJl8QgYKjr0PQbe/NNlZMbArPzysQ39PccfnihLhYgMLvQ/c9v8KeZll2nG0A5IU//qp2XoCuyrtSU/JH5UWfmP8AExHYkZqdInmGNpWP34B9OOpqzIYQMxqMY9OAaltsSheDuAyD7dKFvYG9L2+8ijthCN3V/X0z2A6CnTqfJZtoJAwD/UcjFWm+Q7Dy3YDrx6VXuEIgLM33jgL6Z9abViU9ShFAz/vpiyrnhBn6ZJGasQrgnykwGA2KeAAO57+9XUt8R5m4CgfQHtmoHuo3YQwkBTkSTjkHuNgx7UW7sfNfZXEWLewQcnncfbuKmdgAFUEt/L61CsyRKQDnB+XNRSXBxhep6+wpIYyfdIWBb7gx8vAye1Q+UEsXOflk+VfTGev9ar3N5HAgCcc4HqSe/Priorm9dkRSdqIpJHbOMDPvSswNWRy65UYduFB7d81CUj4YAE4Kge3f+tZxvwF3owQ443dh0GDkdahGqMjOsikBejbc9ef1zRyhdWLlxHiNucYIOO/WqJbEmG65zn9KkjvTKGGQRjvjP9DSXaDcXXlCPm+tQ42NIu5C48sPxk5yPr1qvKwaPAB3ZypqzOocqV7qDimbBt9SB/OgdjmtRj8qZ1cBx3PpkZrFkXB3DkV0upRGXcw6/ewPyrnpgUYgjA7iuulK6RwVo2ZB1peoHbHWg4ByaVRnitTIUDjNdj4KXNyv1rkQo2D1BIIrt/A8O6dT70gPbdN/491+lXaq2C7YFHtVqmIKKKKACiiigAooooAKKKKACiiigAooooA+bvHCY8Q35x1nkP8A48a5kcV2fjuD/ieXjY6yuf1Nci0TbSf4QeTSuOw0cEY7Cg8E854oHSkbjn16UxCoNzVr2yAKM/iPWsy3xu5/KtW3BYbRzWdRm9FXZeihCpkdTy1WUQBR9cYohXMf1GKk2kAD0PJrmbudaQqpknPQVEY2GdgyBVlht2Ljl/60ADlMkMDST6jKTwNIo3EKc8dh+JqrLaXUO4Z6cDaFP4jP9K1mO0k4BFRG33qAh2nsOn61ak0ZygmYbrKADtJ9W7/rmkWIt1BXngtg/luFb0dnPnGGz6cHI/Gn/wBlq/3TyeCpHFac5n7LzMeGEJwQVx3HT8RnH5GrsTyqCEY7T/DnI+vrV9dHdVAC49cdPrmnf2e6gkD5h1/D8qlzRcYWQlpeyqShZhkZCk/n+NaUd1nAPG7qP8ayHUoQCuD7f41LbzKv3iSffrUPU0irM3GYmPjt+X4VYsrqSNgRwAB/nFZqT5jCr/Fx9M+lTJNsAC/eHBqdnoU43VrGslyqSs55dvlIwSQCPfJJ5qrqFycZGcZHyZ9OMVDbnBzk596Zc/vEKpw2Qd2MDI9OTQ5OwlFJluW/luYgsvyqMAIpOCB/ex1NVHmwRjgjoPwqskxAIPNRTOCRngcildt6lKKS0HTai8ZJKgjuQazbjUbmQ/unILccjoPQdz+FPeNWzgZbtTBbuwK9FPWtI2M5Jszbm5ndgSenG9+SfoozjioRLeD5wzMeuRkZx0zuIz+FaxsV3AYOByTj9KWWwdwQqnJ+6T/k1akjJwb6mO012x2tksT90df0zmnxb1BZ8oxORjI9uQtajafKqEdC3G4cD8T1NR/YQD0JPTkcf40c6DkfcqJKR1dgDj5iM9+oZefzxWtE7CIRySBl/gbBH+fxqGO2X7rAcEZAGM4Pbk1ft4o4ywAyCPun09Mis5STNIRaIyoYrz2P+FCq2wjqehPsO9T4G0Ejlaij5ZgOuefpWbRqmZ95EWHAwdvP0zXK38ZWUiu4uI1yxHpXHawhEpde3LCt6L1sc2IXu3MscgjuOlO6Ln35poJzkd6c/wDWuk5ESA5Kjv3r0nwFaklWx3rzm0jaWZVHc17P4H08xwoxFAHoNsu2ICpaRBhQKWgQUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB4j48tf8AiaXL46ux/U1yP2Ym1ZlxnofXNeneN7AvPLJjqSa8/VGQsg5xzt9R3rGba2OqnFNK/VWOaljaFtj/AFBFMYggD0rW1Gz8wiWPlegHceuaySpB+laRlzK5jUg4Satp0Jrc5cZ4HetvT0yDx0rHs0BfBrpLBAiZxWdVmuHXUv28Q8sI5+U8j1oZcsVI65BH8jT4wuMMee1POAp3/dHII965bnWRJulCHoUGOe9BYISWA461Nb2yzKRDJiTqAen0pJYpFJEyFXHB9DVIREpBbAxjrn/69WkAcgIAM96r26RBTuOD6VJJf2lvgg5b+6Ov5UdRl+KFs/eyM54OKvxxgjGAPw/nXKTa5cPlYlCjsDzj64qu+q3Oc3N4Ix3Vev4U1GTIk49X9x3iRLg4Ix3GaikhTPykN9D+lcP9ui2Cfz5ghyVkOdpwcHBxg470iarOGzbXZb3bpVOD7Epxe0jrZ7KGQE7RWRdWG07wdo9aqx63qKFRcDev95Mc/gatjVYpQQY2BPqBSs0aRuVxNIjbScY4zVqOUkHcd2f89Kp3DRuGIzuHYU2xlHmbW/Wk0Wmb9tLkhuv1HSp5EVl3de2cY/SktTCxUFQB3Jx+uauTRRgELwO2OR+BqehLepiXCFWzH17+9U2E0zAbS3cYrQuh8+1Tye2aEheEFxt6c5OPrSWpTdkQxWbHBlyMVdS1hUjamfc5NUpNQ8j72wkD7oOT+grMuNc1CVisQWIDjPersZt92dXHCjEfKBg/SpxaRDBIXJ6dK4F9WuN3+kXpUdwDU4vgrqsl28cjqroGPBVhlTwehHNVyvsReN/iOxns48H5fm7EVRlg4+VAAO49fesRb+9jPyXO8duhH9DVmLXbtf8AWxiVfWPr+KnBqWmWl2dydodoLKPmycGoDKFYKMlu9XIr6C8T5TjPUdx7GoWtQjbwOPapKHr/AKvYo+9+dEcZjRpWGWYYGPWpI43YAIuAepoKbpFQnAQc0ITK0kR8snv0P+NchraFJQQcEfqK7mRA68dK5DxFEFkTjOSc/SrpfGZV9abOb6HFPVSxPGQO9LIoXDDoa1hYG3sITJjzrohwvcIOh/Gutu1vPQ44xbv5K7LnhnTjc3aHGRmvdPD9iLe3QYwcV574I0v51crXrFpGI4gKEKRPRRRTEFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAcv4msRPG7Yyea8ovYDb3JOOh/SvcNShEkTAivJ/ENqEnbA71jUR1UHfQ5+5iUMWjHysfmFc3eRot2wj+7musVP3DM3TpmuZvYyspJGMnI+lTSfvMuvH3UJZKPOxj6V0UB2rx2xWNbR4YHpgc/jWzbkkAAdutFTUKKsi3lXXIOM96dEsgXafunOKjiKAk5went+VSbhyy/eHQVh1OgYLO5D7rd9j/ofrVyO+nhTytRjyvTzRyDUQu/LUZB3H+EVYWGaYBnbAPG2n6ktFG8NsUZraUBfQDLe4ArKNjNdKDG/kI3UH7+Pcmum/s/YNzuEA67ep/GmTS2tuSQnz9Dnk007bCcXLTWxhReHR90yuT7N/OkfwjvJPmENnuK24tRtwcFCvpx0/CpjqkS8qwIHX/DBq1N9xOkuxgP4PuQkcYuGZV3AITkDJydq9s96tW+gNa2zWrhHZskueoPsOK2F1pMYIX8KhfVFckoR9TTc33ZKopfZRlDRb+Aj7PKHzyFP+eKvWdvJOrQX1vslUZWQdD+IpwvJVYeXgt2Ofx71OL66mYebHhe5DDH1PeobuXytbFJrARpI75A/hGc8etVUiInQg5DfyrSvJosFFbp1J9+uKrWUe+XcvK9AfapbVvwKje9zbtYWGMru471ouFePGOg6D/wCtiqluzABcZHf0/OrpdQm7O0nipWwS3RhXMaLIWbJyDxVJ7dpwvLfQGta/TaykjIY9e/6VSh82NjtX94TwScAClF9Cntcins5mC21pEEGMySn+VUW0Quw3yMx5OFOB9CK0ZZbxPuZx/s//AF6pteSxP8yMvPBIzW0WZ8t+xQn8KCUhkkIY9sZqMeDXJ+SX5cZGef8ADit6DVUAwOMHjNaEWqQyccfj0quZ/wAxDo9eVP0OZg8K3SRhklIx35/lTZtC1KIh7e43MOSGHf0rsEu49pG4Y/hqOSeAZJbJPp1P0FS5/Mah5W9Dk4Y7rzP337i87Efdf61u2X2hcPc7VT+Ln+VOk0d9QYPINsYO5MN81SrpDw4IkLgdA/IqH3LurWuLLqqkGO0iLgcA4/rUcMUrfvJc5bsastNLCmGh5HoAR+lQi4lmwcYx2PFIXoKwKrjofSuW8QLmVSegB5ro5JF37C2Wxn8OlYWsqCWaQ/KAfzxV09GmTU1i0c9Z2gud7vxDGcN6881r2cMl7doz8gYVB6KOABUei27Np105+6SDn6HAro/DdkGuEJHetua8n9xgo2gvPU7/AMLacIIVbGOK65RhQKoaZCI4VAHatCtVsc8nqFFFFMQUUUUAFFFFABRRRQAUUUUAFFFFABRRRQBXuxmM/SvM/E0Q81q9OufuH6V5z4kGZTWVTY3obnJmBpIGVexrA1OAmQcdK66DCo4xk1mz2iT72PUDIrOGjOqaumnsYduo2gEYOM1p25IXmjyAqZ79B9BSQYxye+KUne4o6FtI125eniAscglf6imxq7HA5/lUjyCFck59azNPIkihjiIdzlvU1KbgdAcnoB/UVWjikuCGkBWI9jwTWjAEj4RB9aGxr7xkaXc0ZAXC9BuPUe9Rvpzo2ZMM3britFGJHGAasIN/JUZHcUJg2zDa3i6SIQw/i/8Ar0iW1u/G8j3reeFWB+UH1/8ArVXltNwHlqBjrx/jzT1JuijHpkD8feUfT+lWU0q14IT8+lSRwui4DbPccZ/xp679+13bP908U7oTv0YqWVrnHlgge1R3EdvEDhRnsPT61KzsoOCBk46c/TNZ9xLLuIYYXop9frUtjjFvW5nypncGHJ71c05AFG3GR1HtURXcAMde9WLJBHLheR1qNzUvxYHzckZ+n51OxLcH8j6VEY33B1OM9u1TMCMDOSc9fWmZvcqXcfnBedoB7VXmhxtAJO0ZLHjmr6xkkgnqeDSXSrDD5YHJ/OpGn0I4SrqP7x4I7VN9jt3zlV+h6VXhDKARxx06Yq0q7l3DoePetIsmcSnc6NYPhiu33FUG0K3ydkrbT6HpWzLAUTcckdS2TkflUfkNjgH6VTYkrLcyl0WJW/10g/4FU8WiQEZMkgI6/NV5bdmGTkVKLdum4n1GP61PyKv5lZLGaIAx3BAHQNz9KlJuosbiJF9R1z9KUxSJ905A9/6GmFpOhPPf/JqQ37MSS43Aqo+b0PBqsyk8859jViRQ4G4Zz3qEhxww3Ds3r+VNakPQrvtORj5un+TWFrqs0XloPmfA/Gt04D+3c+47VBJpsl9cxOo4HzH8OlaJ2E9dNiCytFt9NW3Qc4+c/Xmug8N2+2ZeO9D2SwW+3GScAmtPQoNsinFEb83zuE7cumyVjurMYjWrFQ2wwg+lTV1I4HuFFFFMQUUUUAFFFFABRRRQAUUUUAFFFFABRRRQBFcD5D9K888SLiRvrXokwyhrgvE8eGY1lV2N6HxHKxbfM571WndY5WQ9DxUj7wdy0scKz5aUDdjANc6k0zsaK0y4hHcdj6VTj++V79qvyD926H+GqIXEmfyprZh1RaVyGXAz1zUiohkDPyR2NRwnk4P4VKvJJb8qnqMtKcjHUdqnj4OTkVUilAfaRgmrseGGSeKTK2JEyDxnnvVxcKNw/H61WA54qZMgEDGPQ9PrQhMuRHIGRgnoDTjGDknnHXAqOJzgEYwO/wDhQZCATjpyfcfjWlzPqNMa7zt69fy9qjkkUrlh3x70M5YccZ5P/wCuoyGdsAEg9BUMpLuRFgsfqPWq5TcxJ6dafeOtupYnGRnH+NZsWoM5w3HowqbM0WxZCbeDwQePepLc88dc80isspx39amCbRkcA9KEBfUllUEcdaJBlhzz6d6bCp29etKcO3uvf3qrEdR0ZCfSmmPzWEh/CkxJja34sKS4l8uP3pW0FZ306iNEBwvfoKdCGByTx0J/+tWS9/LGwZxxnj2rTtruKZRlhuNKzuW00u5bViw5/AU4bdxx/n2qJSnBBznp/hTgUJC7vm/LP0rRMzaJFA4wcjPNK4xyO/pUe3JIQ8HrSk8dM8UnsIglLIMsM56elV3ZWX5h14FWssynOB/s1DKgbjbz6ioZaKLmSH/aQ/pUqlZFGOPWpJFKggnIx0P9Kqx/JJjtRF2Ynr6kMylGJz1PFaVi/lZx3GKoSkFtvXJ49quwowww6L1NaXa2I06lxjvjH1rY0WP5waxi6MVSM5C8t9TXQ6GnINOGrIqO0TqIRhRUlNjHFOrrOJhRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAjjK1x3iW3JRjiuyIyMVia1bebC3Haomro0pu0jy9xsc+9OTCjOPc1Yv4DFKwNV4uuPXg1yNHetdStckLlgM7uDWe2Q45xxWpdxoVwnUc1mSggr9MYprsD6FiDnrwMc1MckcVXhOfwqY5xkUmOJPGikZPSp0J7VWibOMc4/nUwkGcDrUll1X6ZNSpJjnPFU1fsakVwOlAW0LwkXbwT9OcUhfoynjuTVUy5AGcZ6kU151Q85OeOtNMnlLjSKB8/HsTn9ay73WY7YFYj83Yjr9eKpX1+W/dpnJ4HNUDatLG5J/e+/T8KtK4NJebLluZr9jLKT5bdj/M1bkt0WMBQAB0qDTHXyFUnBArROGjPAz6ip6+g2U7Oba2G/H2rWDq21V5PasOP5ZDjrz1rQt5HDr79D/jSQ2jVgfIw33hkZ+lTFdpDDr0z+tQ2YVfMeTIAGfwzjkc9allQpwx7An15PXr3rTl0uZN+9YRiEyTnJrNuHEkqqxxk9O9WJJeGA4Y/nx6CqTDfOmOueM9azZcV1J5rRHQKB94EEVhG4axuCjfdBxXSytiIdm9PpXPX9oJ5mbt/U09GOLdjXtb9CAQ3J6Yq+ksbjOdvrnvXFxTSWUux+UzgGty2u/MUHqDzQ9PQbinqjc3DGD0H5Uxm3D5Wx65qokykbDzu7elSiTAwfzpNkcrQ4E4x29ajd8Pkdu9KZNwx6dxUbEnqfpUj9RGbkeoqpJkNwcL1Bqw5wcg/WoXGTx3poT3IwckE9jWrbqUiDHncOn1rLRS0gQd62CBHGAT92reyMxFiEb4H8XNdVocfyg1y0OWcZ612WjR4jFa00ubQxqt8ptL0paB0oroOUKKKKACiiigAooooAKKKKACiiigAooooAKKKKACq91EJEI9asUhGRigFoee6/pxVi6iuXYmNiemK9U1OwE6HjmuE1PR5I3YqOK5qkNbo7aNRNWZhKd/PUGqF2MMB6dDV6WCS3zjIFZ9wSQWPJFZxVtzaTTJbX5kzUxIGRUFnjy+vepWyScdB1pS3HEchA4HGeak8wgZx9T7VWJOcdPepAeNp5HaixdyyspzkdKk8xcc1UVx0zyOtKZgvbmpsMstLjkdPSqdzdHtyegWms7O2AcA9TVm3s03q5+Zj0GOlNCbsVIbRxmaX7x5we3sKe4wMZ9zWlKAAV647/8A16z5AC2R1HpVkp3KiSmCTaeFPI/GtCG5DLtGCapSxq646jtVVop4zmJunO0/40WTHf7jSPzOSx5qZHO0AE8H+VY6agynbMu056np+dXkuPl3JznqKTTQ4tG7b3LDaCSMeh/Qk8Yqae7d8lsbfUklsZBz6duKxobj5fmPWpfOypGc/XvRzO1g5Fe9izJKCN2fm7Hv7DNQRv8Avg2cnvVeS4WND81VVu5pMrbpnPVzwP8A69Llb1G2katzebFHOSeAO9RqjeV84O9+TjtUdpbgfvJjuk9+g+lXYwCCSeP5e1FrE3Wxk3tsJVIxj3/lVS1nlicxt95eDXQeSjHcBnPrWXqdkUYXMQwV4Yeo9eKfTUFLXQuxTbhwf96rYk4Ht3rCtpwBjmr6T7vp61LKZoBxgY60jPk8GqvmjHXk0hmx17daQmTEjPPQ80q8k+lQq+85H51KpCn+dJdCWIgxMmO/Naczhoeeo4rKZ8TjHJ25x+NW4Fd2wTk5zWpl5mhYRl3UemK7jTYtkQ47VgaPYHIZhXVQRhFAFb04nNVkm7E1FFFamAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFADXQNVC506KbOVrRopWQ02tjhtb0NFjZlWvPr2Axu6V7XqNuJImWvL9fsTDOzYrGpG2p00Zt6MwLM5Qj35q2AOmKrRL5TuOx5H9atIeDmsJbnWlZEW3JOfzo5B9hUyjKgH160xkwfUHrmlcZCW5OOtOK5GfzoPB3D8hQjZJHTP60XKJ4YwvzYyTVqANlmwCRwBVeM54/Sia4WNTjt+BPsaI7ky7E08znrknOSKoggsWXjPUGq/wBqZ24OcdamBLcdM96shLsO8sKeTximSR5bBHB6VZwCmD97sPWmlScg/wCfpQUZ8sKkYYZHpUCpLCcw5kj7r/EPp61oyJ6cGnxwBecZPB/+tVJ9CWmtUU0u4iuM7W9DwfyNKLh5PliBY+wz+taAjiyFZFBHdhn8qtiEFQVUYHpQ0u4+eXYy4rJ3KtOc/wCx2/E1oRW6r0GCO1TeVg88d80MjdMcHoam4lrvuCorAnovT3pxOAFx8uf/ANVKwGAAAQBhqgbjgHgHj0HpSH1LAdWzjtwTSTIsoOfmB44HbsKoPOyMNx59O1Twyk4IOB2H19KGCKL2rR/dHyjrQpPToR26VewGkIJwGGajlgDcrwe9RfUsiDnHPT/PSnDdxkZHpSiAkANwB096sIoXI/D2obAIQwGex5qXIOPQ00DBwO3akkJU7v0pCHKMtx1Peul0XTfMKswrnbQb5FFeh6JAFhU47VtSV3qc9Z8qNG1tliUADmrgGBQBgUV1pWOJu4UUUUCCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAGSruU1xviXTg6s4FdrWbqdsJYmGM1M1dF05WkjxyeIxsRjkUsZ+UhvwrU1m0ME7HHGayUO1iD07VxyVj0ou6uWE6ADv0pJUBX3HaliYZGelTOowWHSpKuUAMHBHHqKd5Qxx+dOdeTtx/9alQHIx24I7UxCgHOO/rVHUfMP7qM/M3f09a0MEH3qKWIGVJO4oi9RS2MNbiGyYRT/IfU/wCNaUN7bOAQ4I7HNT3thbX8O1wAx/irCGniw3xTqdn8Eg6/pW/KpK6epi5yjry3j1tuby3luDljn09qkN5akZ3cHpXNw4bYBJkltp/GtCaxnhAKYcHjHek4W3LhUhJXv5Gp51s5+Vxn0qeLaSQDn6f1rKOiaoUeVITIsY3SFOdoPGT6DNQR/wBoRAtGsgUEjpkUrFKUH18jphBu5yARwPxqfykjU/wnv9foa5qHVblAVdueoyOhoa+ll/1sxOeuKLD5fPTyOgMtuPvMMjrTftlt0VwcVz4PmNthRnZu2DVmPR9RmfYVEQIJDE+nbj1qbA3CO7savn27EnePSo3kTaQpHI61kXml3tgoklcFSccZrGvL2+jIjjfAbhSOSapU29iJVaa6tt7JK5sXzhRuQ555NWbeQPGpB5HasrTdHvJla4uZG2norHIzWjZxlAVI+7xmlKPLpe44u/Sxox5ZgDwT0qZlI69ahi+aRfbmrTEBf51iWNA46ZIpsmFUfXn3NPUlQTUTfMQc9OgoAUfKAetRTPnv3qRmA5HPYVWJ3SADtyT/ACoDoaemJunUe9ek6XHthX6CuE0C3MkobHevRLNNkaj0FdNBaHHiZa2LNFFFdByhRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAVHMm5TUlB5oA4XxJpu4M4FcLPGyP0+Zf5V7FqNms8bAivONb05oJSwGBXPUh1O2hU0szGikGfY1aBz/AFrPYmNvQZ/I1agkDHnr3rBnSJLxz601ARkH6VJMu4HB59KityZMrn5h/OhCJl5OG5p5QkgYGB1NQMxRsNx6irELqc85zwKQdBkkZI44xVeYLIu2QZXoCfWtHYSuB271UlQdP4T/ADrSMmiUYsmmwiQNHkMDkDtVmOedZE83DqhBP4VPKpQ54I6BqaskTnbIMY7960vf/gmipwa1XzR0MOrQRxOYn2+YjRyL6qRyDU1nHbvCpGORn865xLVX5hOfb2+lWYftUXyox46L7fjRb/gGUsMteWWu+pf1ixtHg3MqggryOO+OtXLTS7FUUiNd2OTgVjSxT3sDRTyHkgEBevPr7VBHBqNmdsd1KwHQMcjH40cutyfYVLct1p5nTGK2S4jwo4zxVTVtTgtCiRASyE/MqnoPc1jBL55S3mu7sMHPTHoPSnrpjJ+8kbHqDSsOOGSd6kvktWyDVb6TUwsMUfyjnnsar2OioZC03zSdeen4Vd2QR/Khzgnp/jVi3kaRlzwAOaOaxq6cI6xj83qWSiKnlpwoqkYxE7H+E8g1ohcjPXNV5lBznFZSbbJRDbgs5J49PpVliApYjBHSoIRtOPT9adO4RAoHPvUlPcC24emKb8pG6mhjt9z2pZWCR9etICCSVVXjp60W0ZcjjlutQgbzgfcX+db+iWDTSqzDirjG7sTKSSbOk8O2OxFYiuujXatUdPtRDGoAxWhXZCNkedUlzSuFFFFUQFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQA11DCuc1zTBPGSBXS1DPCHU/rSkroqMnFnjeo2bW8jKw+Ws5JDC+G6Hoa9E1/Rg4Z1FcFd2zROUYY9DXLKNmehTqKSHmQEBj0qt5oguA4PyE8miGQ8o/VeP8A64pZot6EdT2xUJamjNF4hcR7up7Gq0DbJDG34GnaZcFl2MeV4NT3dudvmL1X/JpNEosKTjFQTL2P4UW825B6d81M4yD3poOpS2KAQ3I7/jVGW22klDlc1psn8ulRlBghhjI4p3KUrGfHJLFyp+orTsb6L/lsCQP88VB5BPGB06H9aaYinRMDH+cValYttSVmbEVxaSDcr4J42kd6UTwoTk7sH8DWModB8q8mkJkznHPsar2nkRyL+Y0nvgFO1cEHpVGaeWUje3Hp/SokV3bJBznpmrMdvg7iME9BUObZaUYjFtiSB0U+vWrsIB+XGAD2/rURToc8jg1ZjXAUjpUXuKUtCRiQuB27Cq0pLH+dWSAScdu9VkQyMQTwDSZC0CEneTjIFQXT75wAeF61f8vYD2x1NZsa+dI7DgMefoKSQJ6kyrwXJ4HSqUkpml2J0HWrN0zACGL754+g9TRaWZYiNBn1b1NNIG9CaxtGnkCgcV6DommCFFJHNZ+haOECuw9666CIIoA6CuinC2rOOtVvoiRF2inUUVucwUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAVbq2EqEEcGuH1/Q/vOi16ERniqd5aLMhBGc1Eo3RpTqOLPFbm2eJ8Hhh0NIrBhjOG7iu013QuWdFrjbm3eFyCMYrnlFo7oTUkV0YwXIY8K3863YZFkTHUYrAnO5c/xDkVesrkbVyelQ11K8iz5fkTH/nm/T2qdhgYHfoaY2Jk44xz+NPUF0+Ycjj6Urj8xmD36dqR1+b1HqakZHAyeRTNhPGcU7gIqjnAznvUgi+XBAwOh71LCm7jGcdKsxwdC2Cp/SqTJkZzQEY7jPNRNCAcn6VsR2qkndwG5x2xTTYrkgc8/IOv61VhKSMhIQhDqvzGn+W+ThsN2rSNptIBI465pn2cAksPwqGUpIrKjHG7k+1TKmPqf84qQR7ckClUAY9e1TsNu5FKGH7pep6mpIYwidMZ70jLghicg9alkKqvPTFIlvoVL2XyomAOGPAH1qpCPKQcf/rpLqTzZ1jByAdzVJDE0jgLTt+I9kOgt2mfgZJ6muu0XRcYd1pmiaRna7CuwtrdYlAHat6dPqzmrVeiC2t1iUADpVmgcUV0HI3cKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoIzwaKKAKl1aJKpBGa4vXdBBDOi13+M9aq3NssqEEZBqZRTNITcWeJ3Vq8LlHHFVY2MUu08KeR6V6Hrugb9zovNcRd2TwsUccA8GueUbHZCfMvMmglGRk1cRsNuH41hq0kJGeR61oW91kZ4JFZuJqtTXj8uQY4460pi6beneqUc2xuD161cjmVl4PPcVNhNDkjCktngdFqWM5wuevOf8ahVzv28e9XLe2aZz5a5bv6AVcVfYUmktSaLbt3EHPQnp9KTI5HRj1PtSyfuAoY5djgKvYjjmo5ZFU4ONw6/wCFavQzWrEIwOu455zTWVs5IwB0pjXKqMDknpimCWRsluc/p9KzZaTHE8HA5pCuwZbqeKEdAM9MdKgmmLHjp2qGOw8DJJB4U9/X2qleXJQbEyztwqipHmbAjTnH+cmmxWxd9wG526t/QUJXDYq21qwJJ+aV+WPp7Cuo0XRyzB3X86fpOiliGYV2FnZrCoAHNb06fVnPVq20Q60tVhQADGKuAY4FAAAwKK6EjlbuFFFFAgooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooArXFssqkEZFcrrHh9JQzItdnUckKuOn4VLimVGbizxu90yW3YgrkVmeU8Tbo/xX/CvXNR0WOdThea4/UvDskbFkWsZQa2OuFVPfc5mO65G/gjsauRToAMH61FPZSISHWqrRMPunp2P+NZNG6dzWW5UNvx0xxVldVmQ/uyF+g9awN8ijDce9OFyBwfz9aFdbDai99fU2WviWyzHce/p+FRtOWfOflHP1+tZnmK/FSqdo2luT3pXY7JF83K5DDGR19PwqUTbgSDwemOKzACDuyD9aZJdIjbEOeKYtDSabaMDpUDTmRtq8n/PNUkaeU8/Inv1P4Vo2do8hCxrxU8oNpE1vC0hCrznqa6jSdHyAzCnaPo2MM611VvbrGoAGK3p0+rOSrW6IZbWqRAACrYAHSjpRXQlY5m7hRRRQIKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooARlDdaqzWSSg7hmrdFFhptHN3vh+GUEha5y98MMuSgr0KTvVO471m4JmsKkl1PLrjRbiLPynFUJLGVT8ydK9FvehrBuuprJxSOmNRvc5I2rg5wRQLZz1Zq25OppgqbGikZi2rt/eb61Zg06VjhEx+FacHUVs2nUU1EmU2jLsdAlkILCur03Q0hAJFWbLoK14+1axgkc1SpJiQ26xjAGBU9FFanPcKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/2Q==",
	})
}

func Ping(c *gin.Context) {
	c.JSON(200, gin.H{
		"message": "pong",
	})
}

func AuthRequired() gin.HandlerFunc {

	log := logger.GetLogger()

	return func(c *gin.Context) {

		if bearer := c.GetHeader("Authorization"); bearer != "" {

			log.Debug("has authorization header")

			tknStr := bearer[7:len(bearer)]
			claims := &Claims{}

			log.Debug("token = " + tknStr)

			tkn, err := jwt.ParseWithClaims(tknStr, claims, func(token *jwt.Token) (interface{}, error) {
				return config.GetConfig().JWTKey, nil
			})
			if err != nil {

				log.Debug("Got error while checking bearer token: " + err.Error())

				if err == jwt.ErrSignatureInvalid {
					c.JSON(http.StatusUnauthorized, gin.H{"error": "Wrong Token"})
					c.Abort()
					return
				}
				c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})
				c.Abort()
				return
			}
			if !tkn.Valid {

				log.Debug("Invlalid toke")

				c.JSON(http.StatusUnauthorized, gin.H{"error": "Wrong Token"})
				c.Abort()
				return
			}
			//c.Set("Username", claims.Username)
			u, err := entity.FindUser(claims.Username)
			if err != nil {
				c.JSON(http.StatusUnauthorized, gin.H{"error": "User not found"})
				c.Abort()
				return
			}

			log.Debug("Found user: " + u.Name)

			c.Set("User", u)
		} else {
			c.JSON(http.StatusUnauthorized, gin.H{"error": "Authorization Required"})
			c.Abort()
			return
		}
		c.Next()
	}
}

func Auth(c *gin.Context) {

	log := logger.GetLogger()

	var creds Credentials
	if err := c.ShouldBindJSON(&creds); err != nil {
		c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})
		return
	}

	_, err := entity.LoginUser(creds.Username, creds.Password)
	if err != nil {
		c.JSON(http.StatusUnauthorized, gin.H{"error": "Wrong Credentials"})
		return
	}

	expirationTime := time.Now().Add(5 * time.Minute)
	claims := &Claims{
		Username: creds.Username,
		StandardClaims: jwt.StandardClaims{
			// In JWT, the expiry time is expressed as unix milliseconds
			ExpiresAt: expirationTime.Unix(),
		},
	}

	token := jwt.NewWithClaims(jwt.SigningMethodHS256, claims)
	// Create the JWT string
	tokenString, err := token.SignedString(config.GetConfig().JWTKey)
	if err != nil {
		log.Debug("Error = " + err.Error())
		c.JSON(http.StatusInternalServerError, gin.H{"error": "Unknown Error"})
		return
	}

	c.JSON(http.StatusOK, gin.H{"token": tokenString})
}

func SendMessage(c *gin.Context) {

	log := logger.GetLogger()

	var req SendMessageReq
	if err := c.ShouldBindJSON(&req); err != nil {
		c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})
		return
	}

	user := c.MustGet("User").(*entity.User)
	// Validation
	if req.ChatID == 0 {
		c.JSON(http.StatusBadRequest, gin.H{"error": "chat_id required"})
		return
	}

	if req.Text == "" {
		c.JSON(http.StatusBadRequest, gin.H{"error": "text required"})
		return
	}

	parseMode := req.ParseMode
	if parseMode == "" {
		parseMode = "html"
	}

	m := entity.NewMessage()
	m.Message = req.Text
	m.ChatID = req.ChatID
	m.ParseMode = parseMode
	m.BotID = user.DefaultBot
	m.UserID = user.ID
	if err := m.Insert(); err != nil {
		log.Error("Can't insert data into the database: " + err.Error())
		c.JSON(http.StatusInternalServerError, gin.H{"error": "Server Error"})
		return
	}

	log.Debug("User " + user.Name + " is about to send a message #" + strconv.FormatInt(m.ID, 10))
	go m.Send("Telegram")

	c.JSON(http.StatusCreated, gin.H{"id": m.ID})
}

func GetMessageStatus(c *gin.Context) {
	log := logger.GetLogger()

	idStr := c.Query("id")
	if idStr == "" {
		c.JSON(http.StatusBadRequest, gin.H{"error": "id required"})
		return
	}

	ID, err := strconv.ParseInt(idStr, 10, 64)
	if err != nil {
		c.JSON(http.StatusBadRequest, gin.H{"error": "invalid id"})
		return
	}

	m, err := entity.GetMessage(ID)
	if err != nil {
		log.Debug(err.Error())
		c.JSON(http.StatusInternalServerError, gin.H{"error": "server error"})
		return
	}

	user := c.MustGet("User").(*entity.User)
	if err != nil {
		log.Debug(err.Error())
		c.JSON(http.StatusNotFound, gin.H{"error": "not found"})
		return
	}

	if user.ID != m.UserID {
		c.JSON(http.StatusNotFound, gin.H{"error": "not found"})
		return
	}

	status := "NOT DEFINED"
	switch m.IsSuccess {
	case 1:
		status = "SUCCESS"
	case -1:
		status = "PENDING"
	case 0:
		status = "FAIL"
	}

	c.JSON(http.StatusOK, gin.H{"message": status})
}
